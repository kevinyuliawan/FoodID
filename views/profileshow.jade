extends layout

block content
  h3= title

  if updatesuccess
    p
      h3
        span(style="color:#5990BF") Update successful!

  // - use a hidden input to expose the def value, so that custom.js can look at it and trigger the checkbox if appropriate
  // - input(type="hidden", name="hidden", value="#{def}", id="hidden")


  form(action="/profile/#{profile._id}", method="post", data-ajax="true")
    div(data-role="fieldcontain")
      label(for="name") Name:
      input(type="text", name="name", id="name", value="#{profile.name}", data-mini="false", data-clear-btn="true")

    div(data-role="fieldcontain")
      label(for="allergies") Allergies:
      textarea(cols="40", rows="10", name="allergies", id="allergies", data-mini="false") #{allergies}

    div(data-role="fieldcontain")
      label(for="medications") Medications:
      textarea(cols="40", rows="10", name="medications", id="medications", data-mini="false") #{medications}

    //- 
      // unable to get default checking to work for now
      div(data-role="fieldcontain")
          label(for="default") Checked by default?
          input(type="checkbox", name="default", id="default", data-mini="false")

    - if (scan == "true")
      a(href="", data-rel="back", data-role="button", data-icon="back", data-theme="b") Back

    - else
      div.ui-grid-a
        div.ui-block-a
          a(href="", data-rel="back", data-role="button", data-icon="back") Back
        div.ui-block-b
          input(type="submit", name="submit", value="Update", data-icon="check", data-theme="b")

   


